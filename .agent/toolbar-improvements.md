# 工具栏改进说明

## 问题描述
TUI Image Editor 的工具栏控件（如颜色选择器、形状选项等）会遮挡图片画布，导致无法在被遮挡的区域添加内容。

## 解决方案

### 1. 双击隐藏功能
- **快速双击同一工具按钮**：在300毫秒内双击同一个工具按钮（如矩形、文本等），工具选项面板会自动隐藏
- 这样可以快速切换工具面板的显示/隐藏状态，方便在任何位置添加内容

### 2. 自定义关闭按钮
- 每个工具选项面板顶部都会自动添加一个 **"✕ 隐藏面板"** 按钮
- 点击此按钮可以立即隐藏当前面板
- 按钮有悬停效果，提供良好的视觉反馈

### 3. ESC 键快捷键
- 按下 **ESC 键**可以快速隐藏所有工具选项面板
- 这是最快速的隐藏方式

### 4. 优化的面板定位 ⭐
- 工具选项面板现在固定在**右下角**
- **完全不遮挡图片画布**，可以自由操作图片任何区域
- 使用 `position: fixed` 确保面板始终在视窗右下角
- 使用半透明背景（98%不透明度）
- 添加阴影效果，提升视觉层次
- 最大高度和宽度限制，超出部分可滚动
- 更高的 z-index (1000)，确保面板始终在最上层

## 使用方法

### 方法一：双击工具按钮
1. 点击工具按钮（如"矩形"）打开选项面板
2. 设置好颜色、线条粗细等选项
3. 快速双击"矩形"按钮，面板隐藏
4. 现在可以在画布任何位置添加矩形

### 方法二：使用关闭按钮
1. 点击工具按钮打开选项面板
2. 设置好选项
3. 点击面板顶部的"✕ 隐藏面板"按钮
4. 面板隐藏，可以自由操作画布

### 方法三：使用 ESC 键
1. 打开任何工具选项面板
2. 按下键盘上的 ESC 键
3. 所有面板立即隐藏

## 技术实现细节

### setupToolbarToggle 函数
- 使用 `MutationObserver` 监听 DOM 变化
- 自动为新出现的工具选项面板添加关闭按钮
- 使用事件捕获（capture phase）拦截点击事件
- 跟踪当前活动的菜单和最后点击时间

### CSS 改进
- 工具选项面板定位：`position: fixed; right: 20px; bottom: 60px`
- 完全不遮挡图片画布，固定在视窗右下角
- 半透明背景：`rgba(255, 255, 255, 0.98)`
- 阴影效果：`box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2)`
- 响应式尺寸：`max-height: calc(100vh - 150px); max-width: 300px`
- 高优先级层级：`z-index: 1000`

## 注意事项
- 双击时间阈值为 300 毫秒，需要快速点击两次
- 关闭按钮会自动添加到所有工具选项面板
- ESC 键会隐藏所有面板，不只是当前活动的面板
